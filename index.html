<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <script defer type="module" src="/main.js"></script>
    <link rel="stylesheet" href="/styles/base.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  </head>
  <body class="bg-gray-100 min-h-screen">
    <div x-data>
      <!-- Navbar -->
      <template x-if="$store.auth.isAuthenticated">
        <nav x-data="navbar" class="bg-white shadow-sm">
          <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
              <div class="flex items-center space-x-4">
                <img src="/logo.svg" alt="Logo" class="h-8 w-auto">
                <div>
                  <span class="text-lg font-semibold" x-text="'Olá, ' + $store.auth.user?.username"></span>
                  <span class="text-sm text-gray-500 ml-2" x-text="$store.auth.user?.type || 'User'"></span>
                </div>
              </div>
              
              <div class="flex items-center space-x-4">
                <!-- Notifications Dropdown -->
                <div class="relative" x-data="{ open: false }">
                  <button @click="open = !open" class="p-2 hover:bg-gray-100 rounded-full">
                    <i class="fas fa-bell"></i>
                  </button>
                  <div x-show="open" @click.away="open = false" 
                       class="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg py-2">
                    <div class="px-4 py-2 border-b border-gray-200">
                      <h3 class="font-semibold">Notifications</h3>
                    </div>
                    <div class="max-h-64 overflow-y-auto">
                      <template x-for="notification in notifications" :key="notification.id">
                        <div class="px-4 py-2 hover:bg-gray-50">
                          <p x-text="notification.message" class="text-sm"></p>
                          <span x-text="notification.time" class="text-xs text-gray-500"></span>
                        </div>
                      </template>
                    </div>
                  </div>
                </div>

                <!-- Profile Dropdown -->
                <div class="relative" x-data="{ open: false }">
                  <button @click="open = !open" class="p-2 hover:bg-gray-100 rounded-full">
                    <i class="fas fa-user"></i>
                  </button>
                  <div x-show="open" @click.away="open = false" 
                       class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2">
                    <a href="#" class="block px-4 py-2 hover:bg-gray-100">
                      <i class="fas fa-key mr-2"></i> Manage Password
                    </a>
                    <a href="#" class="block px-4 py-2 hover:bg-gray-100">
                      <i class="fas fa-user-cog mr-2"></i> Manage Profile
                    </a>
                    <hr class="my-2">
                    <button @click="logout" class="block w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600">
                      <i class="fas fa-sign-out-alt mr-2"></i> Logout
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
      </template>

      <!-- Main Content -->
      <main class="container mx-auto px-4 py-8">
        <!-- Login Form -->
        <template x-if="!$store.auth.isAuthenticated">
          <div x-data="login" class="max-w-md mx-auto card p-6">
            <h2 class="text-2xl font-bold mb-6">Login</h2>
            
            <form @submit.prevent="handleSubmit">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">
                    Username
                  </label>
                  <input 
                    type="text" 
                    x-model="formData.username"
                    class="input"
                    required
                  >
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">
                    Password
                  </label>
                  <input 
                    type="password" 
                    x-model="formData.password"
                    class="input"
                    required
                  >
                </div>

                <div x-show="formData.error" x-text="formData.error" 
                     class="text-red-600 text-sm">
                </div>

                <button type="submit" class="btn btn-primary w-full">
                  Login
                </button>
              </div>
            </form>
          </div>
        </template>

        <!-- Dashboard -->
        <template x-if="$store.auth.isAuthenticated">
          <div x-data="dashboard">
            <!-- Tabs -->
            <div class="border-b border-gray-200 mb-6">
              <nav class="flex space-x-8">
                <template x-for="tab in tabs" :key="tab.id">
                  <button 
                    @click="activeTab = tab.id"
                    :class="{'border-b-2 border-blue-500': activeTab === tab.id}"
                    class="py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700"
                    x-text="tab.name">
                  </button>
                </template>
              </nav>
            </div>

            <!-- Tab Content -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <!-- Dashboard -->
              <template x-if="activeTab === 'dashboard'">
                <template x-for="card in dashboardCards" :key="card.id">
                  <div class="card p-6">
                    <h3 class="text-lg font-semibold mb-2" x-text="card.title"></h3>
                    <p class="text-gray-600" x-text="card.content"></p>
                  </div>
                </template>
              </template>

              <!-- Pedidos -->
              <template x-if="activeTab === 'pedidos'">
                <div class="card p-6 col-span-full">
                  <h3 class="text-lg font-semibold mb-2">Pedidos Page</h3>
                  <p class="text-gray-600">Sample content for Pedidos tab</p>
                </div>
              </template>

              <!-- Arquitetos -->
              <template x-if="activeTab === 'arquitetos'">
                <div class="card p-6 col-span-full">
                  <h3 class="text-lg font-semibold mb-2">Arquitetos Page</h3>
                  <p class="text-gray-600">Sample content for Arquitetos tab</p>
                </div>
              </template>

              <!-- Experiencias -->
              <template x-if="activeTab === 'experiencias'">
                <div class="card p-6 col-span-full">
                  <h3 class="text-lg font-semibold mb-2">Experiências Page</h3>
                  <p class="text-gray-600">Sample content for Experiências tab</p>
                </div>
              </template>

              <!-- Campanhas Bonus -->
              <template x-if="activeTab === 'campanhas'">
                <div class="card p-6 col-span-full">
                  <h3 class="text-lg font-semibold mb-2">Campanhas Bônus Page</h3>
                  <p class="text-gray-600">Sample content for Campanhas Bônus tab</p>
                </div>
              </template>
            </div>
          </div>
        </template>
      </main>
    </div>
  </body>
</html>